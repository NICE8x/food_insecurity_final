---
title: "Map the Meal Gap Data"
author: "Tessa Senders"
date: "11/13/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r import libraries}
library(tidyverse)
library(readxl)
```

Import Map the Meal Gap Data

```{r import map the meal data}
path_1_df = 
tibble(
path = list.files("food_insecurity_county1_data"))

path_1_df = path_1_df %>%
  mutate(
    path = str_c("food_insecurity_county1_data/", path),
    data = map(.x = path, ~read_excel(.x))
)

path_2_df = 
tibble(
path = list.files("food_insecurity_county2_data"))

path_2_df = path_2_df %>%
  mutate(
    path = str_c("food_insecurity_county2_data/", path),
    data = map(.x = path, ~read_excel(.x, sheet = 2))
)

path_df = bind_rows(path_1_df, path_2_df)


path_df[[2]][[1]]$FIPS <- as.numeric(path_df[[2]][[1]]$FIPS)
path_df[[2]][[2]]$`% FI Btwn Thresholds` <- as.numeric(path_df[[2]][[2]]$`% FI Btwn Thresholds`)


path_df = path_df %>%
  unnest(data) %>%
  janitor::clean_names() %>%
  rename(
    
  )





  pivot_longer(
    week_1:week_8,
    names_to = "week",
    values_to = "observation"
  ) %>%
  mutate(
    week = as.numeric(str_replace(week, "week_", "")),
    arm = str_extract(path, "/[a-z][a-z][a-z]"),
    arm = str_remove(arm, "/"),
    id = str_extract(path, "[0-9]+")
  ) %>%
  select(-path)

```

```{r one dataset}
read_excel('food_insecurity_data/MMG2011_2009Data_ToShare.xlsx')
```




